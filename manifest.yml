modules:
  jira:adminPage:
    - key: circleci-for-jira-admin-page
      render: native
      resource: admin-home
      resolver:
        function: storageResolver
      title: Admin page example
    - key: circleci-for-jira-configure-page
      render: native
      resource: admin-configure
      resolver:
        function: storageResolver
      title: Configure page example
      useAsConfig: true
    - key: circleci-for-jira-get-started-page
      render: native
      resource: admin-get-started
      resolver:
        function: storageResolver
      title: Get started page example
      useAsGetStarted: true
  webtrigger:
    - key: orb-webtrigger
      function: handle-orb-request
  devops:deploymentInfoProvider:
    - key: deployment-info-provider
      homeUrl: https://github.com/CircleCI-Public/circleci-for-jira
      logoUrl: https://avatars.githubusercontent.com/u/1231870?s=200&v=4
      name:
        value: CircleCI for Jira
  devops:buildInfoProvider:
    - key: build-info-provider
      homeUrl: https://github.com/CircleCI-Public/circleci-for-jira
      logoUrl: https://avatars.githubusercontent.com/u/1231870?s=200&v=4
      name:
        value: CircleCI for Jira
  function:
    - key: handle-orb-request
      handler: index.handleOrbRequest
    - key: storageResolver
      handler: index.storageHandler
resources:
  - key: admin-home
    path: src/admin-page/AdminPage.tsx
  - key: admin-configure
    path: src/admin-page/Configure.tsx
  - key: admin-get-started
    path: src/admin-page/GetStarted.tsx
app:
  id: ari:cloud:ecosystem::app/88071131-405e-4eec-8818-978c8e7230db
  runtime:
    snapshots: false
permissions:
  external:
    fetch:
      backend:
        - 'https://oidc.circleci.com/org/*/.well-known/jwks-pub.json'
  scopes:
    - 'storage:app'
    - 'write:build-info:jira'
    - 'delete:build-info:jira'
    - 'write:deployment-info:jira'
    - 'delete:deployment-info:jira'
